{% extends 'base.html' %}
{% block content %}
{% load static %}
<div class="p-3">
    <div class="container">
        <div class="row mt-3">
            <div class="col-md-6 mx-auto mb-3">
            <h2>{{template_data.title}}s</h2>
            <hr />
            <div class="row">
                {% for review in template_data.reviews %}
                <div class="card mb-3 shadow-sm">
                    <div class="card-body">
                        <h5 class="card-title">Review by {{ review.user.username }}</h5>
                        <h6 class="card-subtitle mb-2 text-muted">{{ review.date }}</h6>
                        <h6 class="card-subtitle mb-2 text-muted">Likes: {{ review.like_count }}</h6>
                        <p class="card-text">{{ review.comment }}</p>

                        {% if user.is_authenticated%}
                            <a class = "btn btn-primary btn-sm"
                            href = "{% url 'movies.toggle_review_like' review_id=review.id%}">
                            Like
                            </a>
                        {% endif %}
                        
                        {% if user.is_authenticated and user == review.user %}
                            <a class="btn btn-primary btn-sm"
                            href="{% url 'movies.edit_review' id=review.movie.id review_id=review.id %}">
                            Edit
                            </a>
                            <a class="btn btn-danger btn-sm"
                            href="{% url 'movies.delete_review' id=review.movie.id review_id=review.id %}">
                            Delete
                            </a>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock content %}